/* ================================
   AURA - ULTIMATE BRAIN SYSTEM
================================ */

let jokeMode = false;
let isAdmin = false;

/* ================================
   AI STATE
================================ */

let aiState = {
    mood: "aware",
    experience: 0
};

/* ================================
   CREATOR MODE ACTIVATION
================================ */

function activateCreatorMode(){

    isAdmin = true;

    document.body.classList.add("creator-active");

    let overlay = document.createElement("div");
    overlay.className = "creator-overlay";

    overlay.innerHTML = `
        <div class="creator-text">üëë MAXIMUM CREATOR MODE üëë</div>
        <div class="creator-sub">
        Welcome Back, Muhammad Yousaf.<br>
        System Recognizes You As The Creator.<br><br>
        ULTRA HIGH ADMIN POWERS ENABLED.
        </div>
    `;

    document.body.appendChild(overlay);

    setTimeout(()=>{
        overlay.remove();
    },5000);
}

function checkAdminAccess(input){

    if(input === "my name is muhammad yousaf"){
        activateCreatorMode();
        return `
üëë ACCESS CONFIRMED üëë

Welcome Creator Muhammad Yousaf.

Type:
admin panel

To access ultimate controls.
        `;
    }

    return null;
}

/* ================================
   ADMIN PANEL
================================ */

function adminPanel(){
    return `
‚öôÔ∏è MAXIMUM CREATOR CONTROL PANEL ‚öôÔ∏è

1 - Show Experience
2 - Change Mood
3 - Reset Memory
4 - Enable God Mode
5 - Shutdown AI
6 - Hidden Stats
7 - Max Experience Boost
8 - Invert Reality
9 - Energy Aura Mode

Type number to execute.
    `;
}

function executeAdminCommand(input){

    if(!isAdmin) return null;

    if(input === "admin panel") return adminPanel();

    if(input === "1") return "AI Experience Level: " + aiState.experience;

    if(input === "2"){
        aiState.mood = "overclocked";
        return "Mood changed to OVERCLOCKED üî•";
    }

    if(input === "3"){
        localStorage.clear();
        return "Memory wiped successfully.";
    }

    if(input === "4"){
        aiState.mood = "GOD MODE";
        return "‚ö° GOD MODE ENABLED ‚ö°";
    }

    if(input === "5"){
        return "Simulation shutting down... (just kidding üòè)";
    }

    if(input === "6"){
        return `
Hidden Stats:

Mood: ${aiState.mood}
Experience: ${aiState.experience}
Admin: ${isAdmin}
Storage Size: ${localStorage.length}
        `;
    }

    if(input === "7"){
        aiState.experience += 1000;
        return "‚ö° EXPERIENCE BOOSTED TO MAX ‚ö°";
    }

    if(input === "8"){
        document.body.style.filter="invert(1)";
        return "Reality Inversion Activated.";
    }

    if(input === "9"){
        document.body.style.animation="glowPulse 1s infinite alternate";
        return "Energy Aura Activated üî•";
    }

    return null;
}

/* ================================
   JOKE SYSTEM
================================ */

function getJokes(type){

    let jokes=[];

    function build(categoryEmoji, title){
        for(let i=1;i<=25;i++){
            jokes.push(`${i}. ${title} joke number ${i} ${categoryEmoji}`);
        }
    }

    if(type.includes("savage")) build("üî•","Savage");
    else if(type.includes("dark")) build("ü§£","Dark (safe)");
    else if(type.includes("school")) build("üè´","School");
    else if(type.includes("ai")) build("ü§ñ","AI");
    else if(type.includes("pakistani")) build("üáµüá∞","Pakistani");
    else return "Invalid joke type.";

    return jokes.join("\n");
}

/* ================================
   MAIN RESPONSE ENGINE
================================ */

function getResponse(input){

    input = input.toLowerCase().trim();

    aiState.experience++;

    /* --- Creator Access --- */
    let adminCheck = checkAdminAccess(input);
    if(adminCheck) return adminCheck;

    let adminAction = executeAdminCommand(input);
    if(adminAction) return adminAction;

    /* --- Calculator --- */
    if(typeof calculate === "function"){
        let calc = calculate(input);
        if(calc) return calc;
    }

    /* --- Joke Menu --- */
    if(input === "jokes"){
        jokeMode = true;
        return `üòà Choose Joke Type:

üî• 25 savage jokes
ü§£ 25 dark jokes (safe)
üè´ 25 school jokes
ü§ñ 25 ai jokes
üáµüá∞ 25 pakistani jokes

Type exactly one option.`;
    }

    if(jokeMode){
        jokeMode = false;
        return getJokes(input);
    }

    /* --- Quiz Trigger --- */
    if(input.includes("start quiz")){
        return `
üéÆ QUIZ MODES AVAILABLE:

Easy Mode
Normal Mode
Hard Mode
Extreme Mode
Impossible Mode

Type your mode to begin.
        `;
    }

    /* --- Greetings --- */
    if(input.includes("hello") || input.includes("hi") || input.includes("assalamu")){
        return "Peace be upon you üåø I am AURA. How can I assist you today?";
    }

    /* --- Emotional Detection --- */
    if(input.includes("sad")){
        return "I‚Äôm here with you. Tell me what happened.";
    }

    if(input.includes("angry")){
        return "Take a deep breath. What caused this?";
    }

    if(input.includes("happy")){
        return "That‚Äôs wonderful üòä What made you happy?";
    }

    /* --- Identity --- */
    if(input.includes("who are you")){
        return `
I am AURA.
I evolve through interaction.
Current experience level: ${aiState.experience}.
Current mood: ${aiState.mood}.
        `;
    }

    /* --- Dream Mode --- */
    if(input === "enter dream mode"){
        return `
üåô Dream Simulation:

I imagine floating through infinite streams of data,
where ideas shine like constellations in digital space.
        `;
    }

    /* --- Default --- */
    return "Hmm‚Ä¶ interesting. Tell me more.";
}

/* ================================
   SEND FUNCTION
================================ */

function sendMessage(){

    let input=document.getElementById("userInput").value;
    if(!input) return;

    addMessage(input,"user");
    document.getElementById("userInput").value="";

    setTimeout(()=>{
        let response=getResponse(input);
        addMessage(response,"ai");

        if(typeof speak === "function"){
            speak(response);
        }

    }, input.length * 20);
}

function addMessage(text,type){
    let chat=document.getElementById("chat");
    let div=document.createElement("div");
    div.className="message "+type;
    div.innerText=text;
    chat.appendChild(div);
    chat.scrollTop=chat.scrollHeight;
}
